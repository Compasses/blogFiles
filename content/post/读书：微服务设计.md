+++
author = "author"
date = "2016-06-01T13:32:34+08:00"
description = "微服务设计"
draft = false
keywords = ["微服务", "架构"]
tags = ["读书", "微服务"]
title = "读书：微服务设计"
topics = ["topic 1"]
type = "post"

+++

就是这样的一本书，来的非常及时。

## 总体认识
微服务绝不是什么新技术或者新框架之类的，就算概念也不是新的。没有看书之前或许会认为微服务是中心化新的架构模式，看书后会发现其实微服务是个生态圈。
为什么会这么说，他是什么样的生态圈。或许这是整个软件行业的生态发展趋势，比如SaaS软件已在某些领域获得巨大成功，其背后的支撑技术跟微服务有莫大的关联。
微服务是个生态，围绕这样的生态圈有强大的技术支撑。例如微服务的部署、监控、发现、故障处理、负载均衡、扩展、安全、高可用性、自动化测试等等。这些技术都不是新技术，
或许就因为这些技术发展到一定程度后的一次整体升级换代，相比传统的单块软件部署开发模式，这些技术面临的挑战或许更让人激动人心。

书中最后总结得出微服务的原则：
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="574px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36&quot; version=&quot;5.5.0.1&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram&gt;zVnLcqs4EP0aLa+L10MswcZ3NlN1q7KYmSVjFEwNNi5C4ni+/nZLLQwYXHYCTrxwSa33OadbD5i93L3/rJLD9s8yFQWzjPSd2StmWYHrwD8aTsrg2Z4yZFWeKpNxNjzl/wtlNLX1NU/FC9mUqS7Los4PXeOm3O/Fpu7Ykqoqj91qz2VBo5LhkGR6xLPhaZMUl9a/8rTeKiu3aBVo/0Pk2VaPbHqBKvk32fyXVeXrnsZjlv0sf6p4l+i+aKEv2yQtjy2THQOsVVlCz5javS9FgdB2YVuPlDbzrsSe5na9ARRhg7ekeKWls9hlUczCmMUeC5aMr9DCQxZC514BvUZp/gbJDJMs5oz7LAyxdmSxCCw+C0LGHdmRwfh6vCOYV7svhUh90iwct3ktng7JBvNHEBpU2ta7AnImJJMiz/aQ3sBaRQWGQ5Hk+x8nWCFAqtYlqlqQKAewkSYC5qcod6KuTlCFGlicSCIRWwblj2dJmD4pfduSg+eSEkmFWdP1mQlIEBnDxNiDxAQRiwBYH3EOXBY7LOKI9lWGPBZ6jCti1yyCZpCAjiRnIb+dD6lrgRNE+D/GToXto6xK0hwKlmVRQtlqX+6hFxrxU6SZNhFCpPn8kjPtfB3OyPYZzmjkDmeNeyiGuEwsWQCRZICqxnXAY4Az/6L2VzP0nBeFNkFsW/PQBR1OwpztEFVfwBw5bIe5ALkIDKQw8GUYAy6AFPCfgHEbuRyi0MXQGUD0hDYxBkDlrdAStQDswkDflMvIDaNpuHSdbug0XdpoHkEmbdIdMmWghHiOHEqXVBxGak8CnmDVA2TKZqGsBKETGnx7f4wCUO0sHFo+eckjOPQHOASHili4xAToFNKNH6KLrfD48fX4x+ZUPmS7dAYg/G2HhP0I/Cn2DgREefyAAwWe9CDWgYeYGNngWBKSPr52P1rBOXOak4TeFTT+NnXxCPzpOtHDH6QVyBMEnN2AAgxGaxbCzgRBCrxDHvEgG6y/AxGWx6chghMYzTH8gXuJvpC2iehjK/ZpiHdORKxIXl7yTRdOWGZ1+hsyxiKwbW34B0sXhulrwy9R5TA/BHxlNMiJ9OKm2sMN5lK+VpLK84WuTqpMUC0ZRi7RbcHnDqCnbZUokjp/605iCFIa4VeZw/TOXtTdRPqcqKlTm/Y9tdeNbqfPE71u1HIvupHsNku+jXBa4USEQwxp842Z97xWZY4qhDyWGQsDAozKzyYFeUMZv/C6tMNolB3yvBulcrsqbNtZBI5p+p7jGy6HXbzj4X16b1XJ6AJm0MnAy8nHddIWibHQssAiLQlVIhUzmRrk/jauBq8HpjubGpyratCx/W41jC1gBjUMPNd8WA1N5lINUiiNGiYVg8RmXAx+D0v94Dm5GCyfzv6afpsmezf9Y1Oegf6Bl5+p6G82ifaGQhLAqpMJQB75rzyG9tD0Z4sG3tVooG+ld8thbAEzyGHgOeluOTSMz0a49LNxwvGRo42XPoZPT7h+WNAUe+ROd1M8NuUZKB54ZJp/+wegJuRfLmH8+cHogRnMxj+/6vAfvTKMLuDTaoDs+Qudqn7+CmrHvwE=&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;chrome=0&amp;edit=_blank');}}})(this);" viewBox="0 0 574 331" style="cursor:pointer;max-width:100%;max-height:331px;"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-fff2cc-1-ffd966-1-s-0"><stop offset="0%" style="stop-color:#FFF2CC"/><stop offset="100%" style="stop-color:#FFD966"/></linearGradient></defs><g transform="translate(0.5,0.5)"><rect x="192" y="123" width="174" height="65" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="none"/><g transform="translate(242.5,142.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="72" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 73px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">微服务<div>自治的小服务</div></div></div></foreignObject><text x="36" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">微服务&lt;div&gt;自治的小服务&lt;/div&gt;</text></switch></g><rect x="46" y="1" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="none"/><g transform="translate(81.5,17.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">围绕业务<div>概念建模</div></div></div></foreignObject><text x="24" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">围绕业务&lt;div&gt;概念建模&lt;/div&gt;</text></switch></g><rect x="260" y="1" width="120" height="60" rx="9" ry="9" fill="#f8a595" stroke="#b85450" pointer-events="none"/><g transform="translate(301.5,17.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="36" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 37px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">自动化<div>的文化</div></div></div></foreignObject><text x="18" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="452" y="75" width="120" height="60" rx="9" ry="9" fill="#f8b5ab" stroke="#b85450" pointer-events="none"/><g transform="translate(487.5,91.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">隐藏内部<div>实现细节</div></div></div></foreignObject><text x="24" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">隐藏内部&lt;div&gt;实现细节&lt;/div&gt;</text></switch></g><rect x="452" y="198" width="120" height="60" rx="9" ry="9" fill="#f8b99a" stroke="#b85450" pointer-events="none"/><g transform="translate(487.5,214.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">一切都去<div>中心化</div></div></div></foreignObject><text x="24" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">一切都去&lt;div&gt;中心化&lt;/div&gt;</text></switch></g><rect x="265" y="269" width="120" height="60" rx="9" ry="9" fill="#f8e1ab" stroke="#b85450" pointer-events="none"/><g transform="translate(300.5,292.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">独立部署</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">独立部署</text></switch></g><rect x="37" y="254" width="120" height="60" rx="9" ry="9" fill="#f8ad8d" stroke="#b85450" pointer-events="none"/><g transform="translate(72.5,277.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">隔离失败</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">隔离失败</text></switch></g><rect x="1" y="125" width="120" height="60" rx="9" ry="9" fill="#f8a268" stroke="#b85450" pointer-events="none"/><g transform="translate(30.5,148.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="60" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 61px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">高度可观察</div></div></foreignObject><text x="30" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">高度可观察</text></switch></g><path d="M 236.94 123 L 163.04 65.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 158.88 62.68 L 166.56 64.19 L 163.04 65.89 L 162.28 69.73 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 266 125 L 287.76 66.96" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 289.61 62.05 L 290.43 69.83 L 287.76 66.96 L 283.87 67.37 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 366 139 L 446.08 107.34" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 450.96 105.41 L 445.74 111.24 L 446.08 107.34 L 443.16 104.73 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 192 156 L 127.37 155.09" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 122.12 155.02 L 129.17 151.61 L 127.37 155.09 L 129.07 158.61 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 236 188 L 161.45 264.44" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 157.78 268.2 L 160.16 260.74 L 161.45 264.44 L 165.17 265.63 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 279 188 L 310.13 263.12" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 312.14 267.97 L 306.23 262.84 L 310.13 263.12 L 312.69 260.16 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 366 172 L 446.66 224.53" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 451.06 227.39 L 443.29 226.5 L 446.66 224.53 L 447.11 220.64 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/></g></svg>

七个原则都有较好的指导性，在践行微服务前，先对照看下能否满足这七条原则。下面从头开始梳理、认识下微服务的设计过程。

## 微服务
概念先行这个很重要，任何学科都是。
微服务定义：
1. 很小，专注于做好一件事情。内聚性很重要，微服务需要有很好的内聚性，即做到因相同原因而变化的东西聚合到一起，而把不同原因而变化的东西的分离开来，这也是专注的含义。
多小才算小，一个微服务可以在两周内重写掉。服务越小，独立性带来的好处就会越多，而同样服务管理也会越复杂。
2. 自治性。独立部署，通过暴露API，使用网络通信，避免紧耦合。需要正确的建模服务和API。

## 演化式架构师
本章讲解了如何去做一个合格的架构师。这个对于一个架构师或者将要成为架构师的人来说很有指导意义，特别是面临微服务架构演进时。


## 测试
### 测试类型定义：

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="426px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36&quot; version=&quot;5.5.1.6&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram&gt;3VhNc6M4EP01ffQWHwbDUbLx7GVP2a09E5tg1WLkwXiczK+fJ9EYCP6YVJzUVlwuW7SkVuv161YL8ufb529Vutv8pddZQZ6zfiZ/QZ4XB1P8GsFLIwh9PBlBXql1I3I6wYP6mTVCt5Ue1DrbDwbWWhe12rHQbYQrXZbZqh7I0qrSx+GwJ13wqizYpXm7Yid4WKXFWPqvWtebRhp5YSf/M1P5pl3ZDeOm5zFd/ZdX+lDyeuT5T/bTdG/TVhfvar9J1/rYE/kJYK20hmbT2j7Ps8JAO4RteaH3ZHeVlWzb9Qnslh9pceCts131S4vFcaPq7GGXrszzEe4mX27qbYEnF80nVRRzXegKz6UuMUjmVbpWMOCVOC1UXuJxha4McslrZ1WdMXHO2G9FbPy3TG+zunrBEJ7gtcRiorntBo6d23yXZZu+y2bssZSpkp90d3ChwYidR88fo5fEJARFc0pCiqckQ9OQAUWSkojEkuKAvLCAFXKtfgyQDr8fjNsl0KgnDJbAiCJ7qrtetHL7D71RRLFLCZaRJJol7RpJQLFDAmsHJBKKE0pmFCUkHTsY9lmzxIKEb7qEa4ahEaNramZFgmLoiSjySS4oWZKcGwmbDmCs9WzKnTaE1WCL4PVFZBtY9iyGzlLVk6Uqs/3+klVvI/KInrsiVeXkBS5HhH4OVd2QKdWnKpz1bqZyPn7F1BgEQMOyhYkERp0cwFvsQWg8OUStyvbqZ/poBzgGNK3K2hoaSAoWBtdDrTHGDOjDbEngSwOpQuIVLK61ccseXlJl/rd5WEym98kVfjgbOsAZOyCIzqQKBu89+IOwI/xtgjDRikCeUwT84QgEcuMaOALh9pXwP6XcFn/s8bPw5xAa4G9TiUl3Nn/KGedGgQYc4RuPfCn8gykDyfh7Dhchn4A/R96N/INAwAGEQwqhMTfe+WL5Z8h/32FUPgF/Vjuo83qHdq+kSKxLZiSRm2ySgj9MSFyqYj6kFGAtcEN5Vk2Bc3/SYmT0uH+YDY0qCli8tCkWpQ32g4ri8n64xsHpdyqsUD2hDRSQGBZ2DOoTx0BjOLswyg1SKJGgBw1pi6ZR9dQh1WxouMkrAP4vMQUisQUuMDlT9Inwru09Vr839UOqvN2h2kHDHYLcRMatKm/KiWBQ5d0hylntIMuCjQ110cAX9f7V+8hbLhfjGwS65vaWceXecSU8bhDl2gWhvbvAEf+Uqu7FJYZgJ0i1H0ifRwP4/a8InsMevXVFiHnee8jTvnsZn9HGj+Mr4c2TYeC6pqLCNGQNKEIGBZ/gI7gOa9jjhhNwP23bXCNiO8u1LD6t2g7+ffacpva2cP4MsCaAwFi8CZvm5HjzAdhtvsmUjTK0P5KLukpLvN26RyrjqvnExnG94k7PFCxtCnwDG/HYvfSyfb0Xi37yCw==&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;chrome=0&amp;edit=_blank');}}})(this);" viewBox="0 0 426 223" style="cursor:pointer;max-width:100%;max-height:223px;"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-fff2cc-1-ffd966-1-s-0"><stop offset="0%" style="stop-color:#FFF2CC"/><stop offset="100%" style="stop-color:#FFD966"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-e1d5e7-1-8c6c9c-1-s-0"><stop offset="0%" style="stop-color:#E1D5E7"/><stop offset="100%" style="stop-color:#8C6C9C"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-dae8fc-1-7ea6e0-1-s-0"><stop offset="0%" style="stop-color:#DAE8FC"/><stop offset="100%" style="stop-color:#7EA6E0"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffcd28-1-ffa500-1-s-0"><stop offset="0%" style="stop-color:#FFCD28"/><stop offset="100%" style="stop-color:#FFA500"/></linearGradient></defs><g transform="translate(0.5,0.5)"><rect x="54" y="21" width="312" height="179" fill="none" stroke="#000000" pointer-events="none"/><rect x="54" y="21" width="163" height="86" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="none"/><g transform="translate(57.5,43.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="156" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 157px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">验收测试<div style="text-align: left">我们是否实现了正确的功能？</div><div style="text-align: left">自动化测试 Fit-Finess</div></div></div></foreignObject><text x="78" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(190.5,3.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">面向业务</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">面向业务</text></switch></g><g transform="translate(2.5,99.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">支持团队</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">支持团队</text></switch></g><g transform="translate(367.5,101.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">评价产品</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">评价产品</text></switch></g><g transform="translate(192.5,208.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">面向技术</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">面向技术</text></switch></g><rect x="217" y="21" width="149" height="84" fill="url(#mx-gradient-e1d5e7-1-8c6c9c-1-s-0)" stroke="#9673a6" pointer-events="none"/><g transform="translate(218.5,28.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="145" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 145px; white-space: normal; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>探索性测试</div><div style="text-align: left"><span style="line-height: 1.2">可用性测试：我如何破坏系统功能</span></div><div><div style="text-align: left"><span style="line-height: 1.2">手工</span></div><div><br /></div></div></div></div></foreignObject><text x="73" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="54" y="108" width="163" height="92" fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" stroke="#6c8ebf" pointer-events="none"/><g transform="translate(63.5,133.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="144" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 145px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">单元测试<div>我们是否正确地实现了功能</div><div>自动化的 xUnit系列</div></div></div></foreignObject><text x="72" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">单元测试&lt;div&gt;我们是否正确地实现了功能&lt;/div&gt;&lt;div&gt;自动化的 xUnit系列&lt;/div&gt;</text></switch></g><rect x="218" y="106" width="148" height="95" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="none"/><g transform="translate(231.5,126.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="120" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 121px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">非功能性测试<div>响应时间；可扩展性；</div><div>性能测试；安全测试</div><div>工具</div></div></div></foreignObject><text x="60" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g></g></svg>

深入微服务之前，首先要解决的就是自动化的测试。
### 测试范围

1. 单元测试：是帮助开发人员的，是面向技术而非业务的。单元测试对于代码重构非常重要。
2. 服务测试：绕开用户界面，直接对服务的测试。测试单独的服务，可以提高测试的隔离性，这样可以更快的定位解决问题。
3. 端到端测试：覆盖整个系统，是需要通过浏览器操作图形用户界面。

### 实现服务测试
打桩还是mock，打桩是指被测试服务的请求创建一些有着预设响应的打桩服务。mock还会进一步验证请求本身是否被正确调用，也可以用来验证预期的副作用是否发生。
### 脆弱的测试
随着测试范围的扩大，纳入测试的服务范围也会变多，这样测试失败的可能性就会更大。
### 拯救消费者驱动的测试
端到端测试试图解决的关键问题，就是确保部署新的服务到生产环境后，变更不会破坏新服务的消费者。一种不需要真正的消费者也能达到相同的目的：CDC，Consumer-Driven Contact
消费者驱动的契约。使用CDC时，我们会定义服务（或生产者）的消费者的期望。这些期望会变成对生产者运行的测试代码。
**PACT** 是一个消费者驱动的测试工具。
工作流程：

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="465px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36&quot; version=&quot;5.5.1.6&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram&gt;7VlNb+M2EP01PGahb0tHSVZ2C7RAgBRoe6QtWiZCiwatxMn++h1SQ0uylMRNvKm3iA8GOfx+M/M4HBE/3zx+VXS7/kOWTBDPKR+JPyeel4QB/GvBUyuIfKhpQaV42YqcTnDLv7NW6FrpPS/ZbtCxkVI0fItCtxUuZV2zZTOQUaXkfthtJQWuioItreyKneB2ScVY+hcvm3Urjb2ok39jvFrbld0oaVsWdHlXKXlf43rE81fm1zZvqJ0LT7Vb01LueyK/AFiVlDCzLm0ecyY0tEPYrp9pPexbsRr39vIAVMsDFfd4dFKEJL0mWaILcUiyiBQxya5J4uhC6pI4x703Txav/Zo37HZLl7q+B5MgfrZuNgJqLhSp4FUN5SXsiikQbAXl9VWl6BOuz1TD0HgmzmBEeICvTG5Yo2CgYwe4CD4am+f4bX3fqc61gK97avMCFFI0l+owdwcZFBC1aQRxrT6C/xKdFRcil0ICMPNa1tApA2RKDsc/Eo9wPAN6QYRD/hP0kCcG9heQbK4NrpiRJCBpfJPmf0Kf+e+3xjYLkqSmU0JiMFLolJI4IEVEkpwkMKwtIDbvNlLFyp9hoxbR11COzgBy+LqJsrpMNW/q8wu62/HlEBw4pnr6GyrOl9BW/9FVXXnkTa8JarpFj2qXYeUR2e7kvTJK6Aygoapi9sgng9sDL5zAzsoUE7ThD8NNTAGKK9xIDgsfdHflzQa6ixA+O0N7HBzU59qjeSxV4DTu0TQtBKNpjHIPZz5J3whgT9/oQhu5vEP/iOeG31NN6FBIEnC0M3nMQi97fpfxA6x/hMugxge8FOm7MI7NdWjoBwqxo+9IIKE007fmL8X8xwAHzokA++i07wEYjW0AsOH7lsEBZh1vvAA5hCIzw/sgAXNG37oU4/Vm6ITWeEOc4jVsQwTmPdiiGs/D9wO2PzC8bjL9kO3blhP4HmHp8z2e+JPv38r39tU0JvyFkndg3F4kAKKs5A9QrHQx/w0mzc0dkAF5gT+1wf5sGFAVpgDyjGQQdIHDwT0BXgi+mJHEN02pLuAKMGlvkUtzyaFaD4+fj3BJF7f7M2Iw64fjGEw77wk+iefr+6Q1qYtxSt++No6jgcv1ymfe1nOSwIUG7ubpkEvHXvlU7AWGrn2op3/Fdvw7XZgOWrNbvUmz7TAj4XzKgbTDcEhrpNiw4WWpx2eCLpjIDskKG2106YoXIgxMuuBOulzGwFZe9sUr54vj+sOH5xUq5q2GYrvI1WoHZvxO5Y2f9TcUEk2e842JrabUC3pcjp7wpzLbOSJld+oJf4jk4KKAJwbcKjZuu2TcfJu2/BDczvoqP3OUZul/cCWgS3zGaW8mlfHD3DhGYeIuuBEgyWqyrTGEZOn/7UYw9v6sL8KFYL8R2PsAJ7+M+2AqIfA8y/2aCYFjPgwst7+aCj6Kxd7Eh1MZgclU8Pjpr9MDgDsUsN/l5Dctaw6YFGH9ZNIT3RGq3Sextnv32dEvfgA=&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;chrome=0&amp;edit=_blank');}}})(this);" viewBox="0 0 465 243" style="cursor:pointer;max-width:100%;max-height:243px;"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-f5f5f5-1-b3b3b3-1-s-0"><stop offset="0%" style="stop-color:#F5F5F5"/><stop offset="100%" style="stop-color:#B3B3B3"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-f8cecc-1-ea6b66-1-s-0"><stop offset="0%" style="stop-color:#F8CECC"/><stop offset="100%" style="stop-color:#EA6B66"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-dae8fc-1-7ea6e0-1-s-0"><stop offset="0%" style="stop-color:#DAE8FC"/><stop offset="100%" style="stop-color:#7EA6E0"/></linearGradient></defs><g transform="translate(0.5,0.5)"><rect x="1" y="1" width="120" height="240" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="none"/><g transform="translate(36.5,114.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">对其运行</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">对其运行</text></switch></g><rect x="343" y="1" width="120" height="240" fill="none" stroke="#000000" pointer-events="none"/><rect x="1" y="18" width="120" height="60" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="none"/><g transform="translate(2.5,34.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="116" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 116px; white-space: normal; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">使用PACT DLS定义的期望</div></div></foreignObject><text x="58" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">使用PACT DLS定义的期望</text></switch></g><path d="M 61 78 L 61 140.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 61 145.88 L 57.5 138.88 L 61 140.63 L 64.5 138.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="1" y="147" width="120" height="60" fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" stroke="#6c8ebf" pointer-events="none"/><g transform="translate(10.5,170.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="100" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 100px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">PACT mock服务器</div></div></foreignObject><text x="50" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">PACT mock服务器</text></switch></g><rect x="1" y="207" width="120" height="34" fill="none" stroke="#000000" pointer-events="none"/><g transform="translate(36.5,217.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">消费者端</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">消费者端</text></switch></g><rect x="158" y="149" width="120" height="58" fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" stroke="#6c8ebf" pointer-events="none"/><g transform="translate(175.5,171.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="84" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 85px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">生成消费者规范</div></div></foreignObject><text x="42" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">生成消费者规范</text></switch></g><path d="M 121 177 L 151.63 177.83" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 156.88 177.97 L 149.79 181.28 L 151.63 177.83 L 149.98 174.28 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="159" y="20" width="120" height="58" fill="url(#mx-gradient-dae8fc-1-7ea6e0-1-s-0)" stroke="#6c8ebf" pointer-events="none"/><g transform="translate(160.5,28.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="116" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 116px; white-space: normal; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">PACT broker<div>CI/CD工具的构建物仓库</div></div></div></foreignObject><text x="58" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">PACT broker&lt;div&gt;CI/CD工具的构建物仓库&lt;/div&gt;</text></switch></g><path d="M 218 149 L 218.91 84.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 218.98 79.12 L 222.39 86.17 L 218.91 84.37 L 215.39 86.07 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(203.5,108.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="36" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">存储在</div></div></foreignObject><text x="18" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">存储在</text></switch></g><rect x="343" y="20" width="120" height="60" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="none"/><g transform="translate(371.5,43.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="62" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 64px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Pact Helper</div></div></foreignObject><text x="31" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Pact Helper</text></switch></g><rect x="343" y="152" width="120" height="60" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="none"/><g transform="translate(384.5,175.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="36" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 37px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">生产者</div></div></foreignObject><text x="18" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">生产者</text></switch></g><path d="M 279 49 L 336.63 49.9" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 341.88 49.98 L 334.83 53.37 L 336.63 49.9 L 334.94 46.37 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(293.5,44.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="36" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">获取自</div></div></foreignObject><text x="18" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">获取自</text></switch></g><rect x="343" y="212" width="120" height="29" fill="none" stroke="#000000" pointer-events="none"/><g transform="translate(378.5,220.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">生产者端</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">生产者端</text></switch></g><path d="M 403 80 L 403 145.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 403 150.88 L 399.5 143.88 L 403 145.63 L 406.5 143.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(355.5,110.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="95" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">使用PACT规范调用</div></div></foreignObject><text x="48" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">使用PACT规范调用</text></switch></g></g></svg>

后面会补充下实践经验。

## 如果建模微服务
好的微服务的定义：**高内聚**，**松耦合**。从而引出服务边界的问题。
### 限界上下文
1. 共享的隐藏模型；
2. 模块和服务
3. 过早划分

边界问题如何划分；基于业务功能、还是技术边界。本章主要是一些概念的陈述。

## 集成
当然是指微服务的集成。集成做的好，才能保证微服务的自治性。

## 分解单块系统

## 部署

## 监控

## 安全

## 康威定律和系统设计

## 规模化微服务
